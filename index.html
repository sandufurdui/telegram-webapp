
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Test Receipt Fetch</title>
</head>
<body>
<h2>Receipt Fetcher</h2>
<pre id="output">Loading...</pre>
<script>
const params = new URLSearchParams(window.location.search);
const target = params.get("url");

if (!target) {
  document.getElementById("output").textContent = "Error: No ?url= parameter provided.";
} else {
  const proxy = "https://corsproxy.io/?" + encodeURIComponent(target);
  fetch(proxy)
    .then(resp => {
      console.log("Status:", resp.status);
      return resp.text();
    })
    .then(html => {
      console.log("Response length:", html.length);
      document.getElementById("output").textContent = html;
    })
    .catch(err => {
      console.error("Fetch error:", err);
      document.getElementById("output").textContent = "Error: " + err.message;
    });
}
</script>
</body>
</html>