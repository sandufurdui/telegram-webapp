<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Proxy</title></head>
<body>
<pre id="output">Loading...</pre>
<script>
const params = new URLSearchParams(window.location.search);
const target = params.get("url");
const raw = params.get("raw"); // server-side callers add ?raw=1

if (!target) {
  document.getElementById("output").textContent = "Error: No ?url= parameter provided.";
} else {
  const proxy = "https://corsproxy.io/?" + encodeURIComponent(target);
  fetch(proxy)
    .then(resp => resp.text())
    .then(html => {
      if (raw === "1") {
        // Replace the entire page with raw HTML for server-side consumers
        document.open();
        document.write(html);
        document.close();
      } else {
        document.getElementById("output").textContent = html;
      }
    })
    .catch(err => {
      document.getElementById("output").textContent = "Error: " + err.message;
    });
}
</script>
</body>
</html>